<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŒ–å­¸æ–¹ç¨‹å¼å¹³è¡¡ç·´ç¿’</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        .equation-input {
            width: 60px;
            text-align: center;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 8px;
            font-size: 18px;
            font-weight: bold;
        }
        .equation-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        .correct {
            border-color: #10b981;
            background-color: #ecfdf5;
        }
        .incorrect {
            border-color: #ef4444;
            background-color: #fef2f2;
        }
        .molecule {
            font-size: 20px;
            font-weight: 600;
            color: #374151;
        }
        .arrow {
            font-size: 24px;
            color: #6b7280;
            margin: 0 16px;
        }
        .hint-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-left: 4px solid #f59e0b;
        }
        .success-animation {
            animation: bounce 0.6s ease-in-out;
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen p-6">
    <div class="max-w-4xl mx-auto">
        <!-- æ¨™é¡Œå€åŸŸ -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">âš—ï¸ åŒ–å­¸æ–¹ç¨‹å¼å¹³è¡¡ç·´ç¿’</h1>
            <p class="text-lg text-gray-600">å¾ç°¡å–®åˆ°é€²éšï¼ŒæŒæ¡åŒ–å­¸åæ‡‰å¼å¹³è¡¡æŠ€å·§</p>
        </div>

        <!-- é›£åº¦é¸æ“‡ -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">é¸æ“‡é›£åº¦ç­‰ç´š</h2>
            <div class="flex flex-wrap gap-3">
                <button onclick="setDifficulty('easy')" class="difficulty-btn bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                    ğŸŸ¢ ç°¡å–® (å–®ä¸€å…ƒç´ )
                </button>
                <button onclick="setDifficulty('medium')" class="difficulty-btn bg-yellow-500 hover:bg-yellow-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                    ğŸŸ¡ ä¸­ç­‰ (åŒ–åˆç‰©)
                </button>
                <button onclick="setDifficulty('hard')" class="difficulty-btn bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                    ğŸ”´ å›°é›£ (è¤‡é›œåæ‡‰)
                </button>
            </div>
        </div>

        <!-- é¡Œç›®å€åŸŸ -->
        <div class="bg-white rounded-xl shadow-lg p-8 mb-6">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-semibold text-gray-800">ç¬¬ <span id="questionNumber">1</span> é¡Œ</h3>
                <div class="text-right">
                    <div class="text-sm text-gray-600">ç­”å°é¡Œæ•¸</div>
                    <div class="text-2xl font-bold text-green-600"><span id="score">0</span> / <span id="total">0</span></div>
                </div>
            </div>

            <!-- åŒ–å­¸æ–¹ç¨‹å¼ -->
            <div id="equationContainer" class="flex items-center justify-center flex-wrap gap-4 mb-8 p-6 bg-gray-50 rounded-lg">
                <!-- æ–¹ç¨‹å¼å°‡åœ¨é€™è£¡å‹•æ…‹ç”Ÿæˆ -->
            </div>

            <!-- æ§åˆ¶æŒ‰éˆ• -->
            <div class="flex flex-wrap gap-4 justify-center mb-6">
                <button onclick="checkAnswer()" class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-medium transition-colors">
                    âœ… æª¢æŸ¥ç­”æ¡ˆ
                </button>
                <button onclick="showHint()" class="bg-purple-600 hover:bg-purple-700 text-white px-8 py-3 rounded-lg font-medium transition-colors">
                    ğŸ’¡ æç¤º
                </button>
                <button onclick="nextQuestion()" class="bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-lg font-medium transition-colors">
                    â¡ï¸ ä¸‹ä¸€é¡Œ
                </button>
                <button onclick="resetInputs()" class="bg-gray-600 hover:bg-gray-700 text-white px-8 py-3 rounded-lg font-medium transition-colors">
                    ğŸ”„ é‡è¨­
                </button>
            </div>

            <!-- çµæœé¡¯ç¤º -->
            <div id="resultContainer" class="hidden mb-6"></div>

            <!-- æç¤ºå€åŸŸ -->
            <div id="hintContainer" class="hidden hint-box rounded-lg p-4 mb-6">
                <h4 class="font-semibold text-amber-800 mb-2">ğŸ’¡ å¹³è¡¡æç¤ºï¼š</h4>
                <div id="hintContent" class="text-amber-700"></div>
            </div>
        </div>

        <!-- å­¸ç¿’æŒ‡å— -->
        <div class="bg-white rounded-xl shadow-lg p-6">
            <h3 class="text-xl font-semibold text-gray-800 mb-4">ğŸ“š å¹³è¡¡æ­¥é©ŸæŒ‡å—</h3>
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <h4 class="font-semibold text-blue-600 mb-2">åŸºæœ¬æ­¥é©Ÿï¼š</h4>
                    <ol class="list-decimal list-inside space-y-2 text-gray-700">
                        <li>åˆ—å‡ºåæ‡‰ç‰©å’Œç”Ÿæˆç‰©ä¸­çš„æ‰€æœ‰å…ƒç´ </li>
                        <li>è¨ˆç®—æ¯å€‹å…ƒç´ åœ¨å·¦å³å…©é‚Šçš„åŸå­æ•¸</li>
                        <li>å¾æœ€è¤‡é›œçš„åˆ†å­é–‹å§‹å¹³è¡¡</li>
                        <li>é€ä¸€èª¿æ•´ä¿‚æ•¸ä½¿å…©é‚ŠåŸå­æ•¸ç›¸ç­‰</li>
                        <li>æª¢æŸ¥æ‰€æœ‰å…ƒç´ æ˜¯å¦å¹³è¡¡</li>
                    </ol>
                </div>
                <div>
                    <h4 class="font-semibold text-green-600 mb-2">å¹³è¡¡æŠ€å·§ï¼š</h4>
                    <ul class="list-disc list-inside space-y-2 text-gray-700">
                        <li>å…ˆå¹³è¡¡é‡‘å±¬å…ƒç´ </li>
                        <li>å†å¹³è¡¡éé‡‘å±¬å…ƒç´ </li>
                        <li>æœ€å¾Œå¹³è¡¡æ°«å’Œæ°§</li>
                        <li>ä½¿ç”¨æœ€å°æ•´æ•¸ä¿‚æ•¸</li>
                        <li>æª¢æŸ¥è³ªé‡å®ˆæ†å®šå¾‹</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentDifficulty = 'easy';
        let currentQuestion = 0;
        let score = 0;
        let totalQuestions = 0;
        let currentEquation = null;

        // é¡Œåº«
        const equations = {
            easy: [
                { reactants: ['Hâ‚‚', 'Oâ‚‚'], products: ['Hâ‚‚O'], answer: [2, 1, 2], hint: 'æ°«åŸå­ï¼šå·¦é‚Š2å€‹ï¼Œå³é‚Š2å€‹ï¼›æ°§åŸå­ï¼šå·¦é‚Š2å€‹ï¼Œå³é‚Š1å€‹ã€‚éœ€è¦èª¿æ•´æ°´çš„ä¿‚æ•¸ã€‚' },
                { reactants: ['Na', 'Clâ‚‚'], products: ['NaCl'], answer: [2, 1, 2], hint: 'éˆ‰åŸå­ï¼šå·¦é‚Š1å€‹ï¼›æ°¯åŸå­ï¼šå·¦é‚Š2å€‹ï¼Œå³é‚Š1å€‹ã€‚éœ€è¦å¹³è¡¡æ°¯åŸå­æ•¸é‡ã€‚' },
                { reactants: ['Mg', 'Oâ‚‚'], products: ['MgO'], answer: [2, 1, 2], hint: 'é‚åŸå­ï¼šå·¦é‚Š1å€‹ï¼›æ°§åŸå­ï¼šå·¦é‚Š2å€‹ï¼Œå³é‚Š1å€‹ã€‚éœ€è¦èª¿æ•´é‚å’Œæ°§åŒ–é‚çš„ä¿‚æ•¸ã€‚' },
                { reactants: ['Al', 'Oâ‚‚'], products: ['Alâ‚‚Oâ‚ƒ'], answer: [4, 3, 2], hint: 'é‹åŸå­ï¼šå·¦é‚Š1å€‹ï¼Œå³é‚Š2å€‹ï¼›æ°§åŸå­ï¼šå·¦é‚Š2å€‹ï¼Œå³é‚Š3å€‹ã€‚é€™æ˜¯è¼ƒè¤‡é›œçš„å¹³è¡¡ã€‚' },
                { reactants: ['Ca', 'Hâ‚‚O'], products: ['Ca(OH)â‚‚', 'Hâ‚‚'], answer: [1, 2, 1, 1], hint: 'éˆ£åŸå­ï¼šå·¦å³å„1å€‹ï¼›æ°«åŸå­ï¼šå·¦é‚Š2å€‹ï¼Œå³é‚Š4å€‹ï¼›æ°§åŸå­ï¼šå·¦å³å„2å€‹ã€‚' }
            ],
            medium: [
                { reactants: ['CHâ‚„', 'Oâ‚‚'], products: ['COâ‚‚', 'Hâ‚‚O'], answer: [1, 2, 1, 2], hint: 'ç¢³åŸå­ï¼šå·¦å³å„1å€‹ï¼›æ°«åŸå­ï¼šå·¦é‚Š4å€‹ï¼›æ°§åŸå­ï¼šå³é‚Š4å€‹ã€‚å…ˆå¹³è¡¡ç¢³ï¼Œå†å¹³è¡¡æ°«ï¼Œæœ€å¾Œå¹³è¡¡æ°§ã€‚' },
                { reactants: ['Câ‚‚Hâ‚†', 'Oâ‚‚'], products: ['COâ‚‚', 'Hâ‚‚O'], answer: [2, 7, 4, 6], hint: 'ç¢³åŸå­ï¼šå·¦é‚Š2å€‹ï¼›æ°«åŸå­ï¼šå·¦é‚Š6å€‹ã€‚å…ˆç¢ºå®šCOâ‚‚å’ŒHâ‚‚Oçš„ä¿‚æ•¸ï¼Œå†è¨ˆç®—Oâ‚‚çš„éœ€è¦é‡ã€‚' },
                { reactants: ['Fe', 'HCl'], products: ['FeClâ‚‚', 'Hâ‚‚'], answer: [1, 2, 1, 1], hint: 'éµåŸå­ï¼šå·¦å³å„1å€‹ï¼›æ°¯åŸå­ï¼šå³é‚Š2å€‹ï¼›æ°«åŸå­ï¼šå·¦é‚Šéœ€è¦å¶æ•¸å€‹ã€‚' },
                { reactants: ['CaCOâ‚ƒ'], products: ['CaO', 'COâ‚‚'], answer: [1, 1, 1], hint: 'é€™æ˜¯åˆ†è§£åæ‡‰ã€‚éˆ£ã€ç¢³ã€æ°§åŸå­æ•¸éƒ½è¦å¹³è¡¡ã€‚' },
                { reactants: ['NHâ‚ƒ', 'Oâ‚‚'], products: ['NO', 'Hâ‚‚O'], answer: [4, 5, 4, 6], hint: 'æ°®åŸå­ï¼šå·¦é‚Š1å€‹ï¼Œå³é‚Š1å€‹ï¼›æ°«åŸå­ï¼šå·¦é‚Š3å€‹ï¼›æ°§åŸå­åˆ†å¸ƒåœ¨NOå’ŒHâ‚‚Oä¸­ã€‚' }
            ],
            hard: [
                { reactants: ['Câ‚ƒHâ‚ˆ', 'Oâ‚‚'], products: ['COâ‚‚', 'Hâ‚‚O'], answer: [1, 5, 3, 4], hint: 'ä¸™çƒ·ç‡ƒç‡’ã€‚ç¢³åŸå­ï¼š3å€‹ï¼›æ°«åŸå­ï¼š8å€‹ã€‚è¨ˆç®—å®Œå…¨ç‡ƒç‡’æ‰€éœ€çš„æ°§æ°£é‡ã€‚' },
                { reactants: ['Al', 'Hâ‚‚SOâ‚„'], products: ['Alâ‚‚(SOâ‚„)â‚ƒ', 'Hâ‚‚'], answer: [2, 3, 1, 3], hint: 'é‹åŸå­ï¼šå³é‚Š2å€‹ï¼›ç¡«é…¸æ ¹ï¼šå³é‚Š3å€‹ã€‚æ³¨æ„Alâ‚‚(SOâ‚„)â‚ƒçš„åŒ–å­¸å¼ã€‚' },
                { reactants: ['Feâ‚‚Oâ‚ƒ', 'CO'], products: ['Fe', 'COâ‚‚'], answer: [1, 3, 2, 3], hint: 'éµçš„å†¶ç…‰åæ‡‰ã€‚éµåŸå­ï¼šå·¦é‚Š2å€‹ï¼›ç¢³åŸå­å’Œæ°§åŸå­è¦ä»”ç´°è¨ˆç®—ã€‚' },
                { reactants: ['KClOâ‚ƒ'], products: ['KCl', 'Oâ‚‚'], answer: [2, 2, 3], hint: 'æ°¯é…¸é‰€åˆ†è§£ã€‚é‰€å’Œæ°¯åŸå­ï¼šå·¦å³è¦ç›¸ç­‰ï¼›æ°§åŸå­ï¼šå·¦é‚Š6å€‹ï¼Œå³é‚Šéœ€è¦èª¿æ•´ã€‚' },
                { reactants: ['Câ‚‚Hâ‚…OH', 'Oâ‚‚'], products: ['COâ‚‚', 'Hâ‚‚O'], answer: [1, 3, 2, 3], hint: 'ä¹™é†‡ç‡ƒç‡’ã€‚ç¢³åŸå­ï¼š2å€‹ï¼›æ°«åŸå­ï¼š6å€‹ï¼›è¨ˆç®—å®Œå…¨ç‡ƒç‡’çš„æ°§æ°£éœ€æ±‚ã€‚' }
            ]
        };

        function setDifficulty(level) {
            currentDifficulty = level;
            currentQuestion = 0;
            score = 0;
            totalQuestions = 0;
            
            // æ›´æ–°æŒ‰éˆ•æ¨£å¼
            document.querySelectorAll('.difficulty-btn').forEach(btn => {
                btn.classList.remove('ring-4', 'ring-blue-300');
            });
            event.target.classList.add('ring-4', 'ring-blue-300');
            
            loadQuestion();
        }

        function loadQuestion() {
            const questionSet = equations[currentDifficulty];
            if (currentQuestion >= questionSet.length) {
                showFinalScore();
                return;
            }

            currentEquation = questionSet[currentQuestion];
            totalQuestions = Math.max(totalQuestions, currentQuestion + 1);
            
            document.getElementById('questionNumber').textContent = currentQuestion + 1;
            document.getElementById('total').textContent = totalQuestions;
            document.getElementById('score').textContent = score;
            
            generateEquationHTML();
            hideResult();
            hideHint();
        }

        function generateEquationHTML() {
            const container = document.getElementById('equationContainer');
            container.innerHTML = '';

            // åæ‡‰ç‰©
            currentEquation.reactants.forEach((reactant, index) => {
                if (index > 0) {
                    const plus = document.createElement('span');
                    plus.textContent = '+';
                    plus.className = 'text-2xl font-bold text-gray-600 mx-2';
                    container.appendChild(plus);
                }
                
                const input = document.createElement('input');
                input.type = 'number';
                input.min = '1';
                input.className = 'equation-input';
                input.id = `reactant-${index}`;
                input.placeholder = '?';
                container.appendChild(input);
                
                const molecule = document.createElement('span');
                molecule.textContent = reactant;
                molecule.className = 'molecule ml-2';
                container.appendChild(molecule);
            });

            // ç®­é ­
            const arrow = document.createElement('span');
            arrow.innerHTML = 'â†’';
            arrow.className = 'arrow';
            container.appendChild(arrow);

            // ç”Ÿæˆç‰©
            currentEquation.products.forEach((product, index) => {
                if (index > 0) {
                    const plus = document.createElement('span');
                    plus.textContent = '+';
                    plus.className = 'text-2xl font-bold text-gray-600 mx-2';
                    container.appendChild(plus);
                }
                
                const input = document.createElement('input');
                input.type = 'number';
                input.min = '1';
                input.className = 'equation-input';
                input.id = `product-${index}`;
                input.placeholder = '?';
                container.appendChild(input);
                
                const molecule = document.createElement('span');
                molecule.textContent = product;
                molecule.className = 'molecule ml-2';
                container.appendChild(molecule);
            });
        }

        function checkAnswer() {
            const userAnswer = [];
            let allFilled = true;

            // æ”¶é›†åæ‡‰ç‰©ä¿‚æ•¸
            for (let i = 0; i < currentEquation.reactants.length; i++) {
                const input = document.getElementById(`reactant-${i}`);
                const value = parseInt(input.value);
                if (isNaN(value) || value < 1) {
                    allFilled = false;
                    break;
                }
                userAnswer.push(value);
            }

            // æ”¶é›†ç”Ÿæˆç‰©ä¿‚æ•¸
            for (let i = 0; i < currentEquation.products.length; i++) {
                const input = document.getElementById(`product-${i}`);
                const value = parseInt(input.value);
                if (isNaN(value) || value < 1) {
                    allFilled = false;
                    break;
                }
                userAnswer.push(value);
            }

            if (!allFilled) {
                showResult('è«‹å¡«å…¥æ‰€æœ‰ä¿‚æ•¸ï¼', 'error');
                return;
            }

            // æª¢æŸ¥ç­”æ¡ˆ
            const isCorrect = JSON.stringify(userAnswer) === JSON.stringify(currentEquation.answer);
            
            // æ›´æ–°è¼¸å…¥æ¡†æ¨£å¼
            const allInputs = document.querySelectorAll('.equation-input');
            allInputs.forEach((input, index) => {
                input.classList.remove('correct', 'incorrect');
                if (userAnswer[index] === currentEquation.answer[index]) {
                    input.classList.add('correct');
                } else {
                    input.classList.add('incorrect');
                }
            });

            if (isCorrect) {
                score++;
                document.getElementById('score').textContent = score;
                showResult('ğŸ‰ ç­”å°äº†ï¼å¹³è¡¡æ­£ç¢ºï¼', 'success');
                document.getElementById('equationContainer').classList.add('success-animation');
                setTimeout(() => {
                    document.getElementById('equationContainer').classList.remove('success-animation');
                }, 600);
            } else {
                showResult('âŒ ç­”æ¡ˆä¸æ­£ç¢ºï¼Œè«‹å†è©¦ä¸€æ¬¡æˆ–æŸ¥çœ‹æç¤ºã€‚', 'error');
            }
        }

        function showHint() {
            document.getElementById('hintContent').textContent = currentEquation.hint;
            document.getElementById('hintContainer').classList.remove('hidden');
        }

        function hideHint() {
            document.getElementById('hintContainer').classList.add('hidden');
        }

        function showResult(message, type) {
            const container = document.getElementById('resultContainer');
            container.className = `p-4 rounded-lg font-medium ${type === 'success' ? 'bg-green-100 text-green-800 border border-green-300' : 'bg-red-100 text-red-800 border border-red-300'}`;
            container.textContent = message;
            container.classList.remove('hidden');
        }

        function hideResult() {
            document.getElementById('resultContainer').classList.add('hidden');
        }

        function nextQuestion() {
            currentQuestion++;
            loadQuestion();
        }

        function resetInputs() {
            const allInputs = document.querySelectorAll('.equation-input');
            allInputs.forEach(input => {
                input.value = '';
                input.classList.remove('correct', 'incorrect');
            });
            hideResult();
            hideHint();
        }

        function showFinalScore() {
            const container = document.getElementById('equationContainer');
            const percentage = Math.round((score / totalQuestions) * 100);
            let message = '';
            let emoji = '';
            
            if (percentage >= 90) {
                message = 'å„ªç§€ï¼ä½ å·²ç¶“å®Œå…¨æŒæ¡äº†åŒ–å­¸æ–¹ç¨‹å¼å¹³è¡¡ï¼';
                emoji = 'ğŸ†';
            } else if (percentage >= 70) {
                message = 'å¾ˆå¥½ï¼ç¹¼çºŒç·´ç¿’å°±èƒ½æ›´åŠ ç†Ÿç·´ï¼';
                emoji = 'ğŸ¯';
            } else if (percentage >= 50) {
                message = 'ä¸éŒ¯çš„é–‹å§‹ï¼å¤šç·´ç¿’åŸºæœ¬æ¦‚å¿µæœƒæ›´é€²æ­¥ï¼';
                emoji = 'ğŸ“š';
            } else {
                message = 'éœ€è¦å¤šåŠ ç·´ç¿’ï¼å»ºè­°è¤‡ç¿’å¹³è¡¡çš„åŸºæœ¬æ­¥é©Ÿã€‚';
                emoji = 'ğŸ’ª';
            }

            container.innerHTML = `
                <div class="text-center">
                    <div class="text-6xl mb-4">${emoji}</div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">ç·´ç¿’å®Œæˆï¼</h3>
                    <p class="text-lg text-gray-600 mb-4">${message}</p>
                    <div class="text-3xl font-bold text-blue-600 mb-4">
                        æœ€çµ‚å¾—åˆ†ï¼š${score} / ${totalQuestions} (${percentage}%)
                    </div>
                    <button onclick="location.reload()" class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-medium transition-colors">
                        ğŸ”„ é‡æ–°é–‹å§‹
                    </button>
                </div>
            `;
        }

        // åˆå§‹åŒ–
        setDifficulty('easy');
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98783cbc75488276',t:'MTc1OTI4MjY3Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
